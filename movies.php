<?php

include "includes/header.php";

$FinalCategoriesArray = array();
$GetCateGories = webtvpanel_CallApiRequest($hostURL . $bar . "player_api.php?username=" . $username . "&password=" . $password . "&action=get_vod_categories");
if (!empty($GetCateGories)) {
    $FinalCategoriesArray = $GetCateGories;
}
$FinalCategoriesArray["result"] = "success";
$FinalCategoriesArray["data"][0] = (object) array("category_id" => "all", "category_name" => "All", "parent_id" => "0");
include "includes/sideNav.php";
echo "\n<p class=\"SerchResult hideOnLoad\">\n    Search Result of <span id=\"searchOf\">American</span>\n    <span class=\"clearSearch\">Clear Search</span>\n</p>\n<h1 id=\"NoResultFound\" class=\"hideOnLoad\">No Result Found!!</h1>\n\n<div id=\"posts\">\n\n    <center id=\"fullLoader\"><img src=\"images/roundloader.gif\"  alt=\"tv image\"> \n      <p class=\"text-center\">LOADING DATA</p></center>\n    <ul class=\"free-wall grid effect-3 videoSection hideOnLoad\" id=\"MoviesContainer\">\n      \n    </ul>\n  </div>\n</div>\n<!--- Body Content End---> \n<!-- MODAL CODE -->\n\n<div class=\"modal fade movie-popup\" id=\"menuModal\"  tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\">\n  <div class=\"modal-dialog modal-dialog-custom\">\n    <div class=\"modal-content\">\n      <div class=\"modal-header\" style=\"border:0;\"> <span class=\"p-close\" data-dismiss=\"modal\" aria-hidden=\"true\">x</span> </div>\n      <div class=\"modal-body\">\n        <div class=\"popup-content\">\n          <div class=\"col-sm-5 col-lg-3 col-md-4 col-xs-7\">\n            <div class=\"poster\">\n              <div class=\"poster-img\"><img src=\"img/poster.jpg\" alt=\"\" class=\"img-responsive\"></div>\n              <div class=\"ratting-bar row\">\n                <p class=\"pull-left\">Overall rate:</p>\n                <div class=\"stars pull-right\"> <span class=\"fa fa-star\"></span> <span class=\"fa fa-star\"></span> <span class=\"fa fa-star\"></span> <span class=\"fa fa-star\"></span> <span class=\"fa fa-star-o\"></span> </div>\n              </div>\n            </div>\n          </div>\n          <div class=\"col-sm-7 col-lg-9 col-md-8 col-xs-12\">\n            <div class=\"poster-details\">\n              <h2>SAN ANDREAS</h2>\n              <ul>\n                <li class=\"i-year\">2016</li>\n                <li class=\"i-duration\">114 min</li>\n                <li class=\"i-movie\">Action</li>\n                <li class=\"i-trailer\"><a href=\"#\">Watch trailer</a></li>\n              </ul>\n              <p>In the aftermath of a massive earthquake in California, a rescue-chopper pilot <br>\n                makes a dangerous journey across the state in order to rescue his estranged <br>\n                daughter.</p>\n              <div class=\"fav row\">\n                <div class=\"res-list\">\n                  <select>\n                    <option>480p</option>\n                    <option selected>720p</option>\n                    <option>1080p</option>\n                  </select>\n                </div>\n                <button class=\"gd\">3D</button>\n                <button class=\"add-fav\"></button>\n              </div>\n              <div class=\"watch-now row\">\n                <button class=\"rippler rippler-default\">watch it now</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- /.modal-content --> \n  </div>\n  <!-- /.modal-dialog --> \n<script src='https://content.jwplatform.com/libraries/fgbTqCCh.js'></script>\n<!-- <script src='js/ajPlayer.js'></script> -->\n<script src='js/flowplayer/flowplayer.js'></script>\n\n<script src='js/mediaPlayers.js'></script>\n<link rel=\"stylesheet\" href=\"js/flowplayer/skin/skin.css\" media=\"screen\">\n  <script type=\"text/javascript\">\n\n    \$(document).ready(function(){\n      if(\$(document).find('.onloadCallCategory').length != 0)\n      {\n        var omLoadCategoryID = \$(document).find('.onloadCallCategory').data('categoryid');\n        var parentControlData = \$(document).find('.onloadCallCategory').data('pcon');\n        if(parentControlData == 1)\n        {\n            getData(omLoadCategoryID);\n        }\n        else\n        {\n          getData(omLoadCategoryID);\n        }\n        \n        \$(document).find(\".rippler\").rippler({\n    effectClass      :  'rippler-effect'\n    ,effectSize      :  0      // Default size (width & height)\n    ,addElement      :  'div'   // e.g. 'svg'(feature)\n    ,duration        :  400\n  });\n      }\n      \$( document ).on(\"click\", \".Playclick\", function(){\n        var StreamId = \$(this).find('.streamId').val();\n        var StreamType = \$(this).find('.streamId').data('streamtype');\n        \$('.Playclick').removeClass('playingChanel');\n        \$(this).addClass('playingChanel');\n        getVideoLinkAjax(StreamId,StreamType);  \n        \n      });   \n\n      \$('#SearchData').keypress(function (e) {\n          var key = e.which;\n          if(key == 13)  // the enter key code\n          {\n            callSearchFun(); \n          }\n      });\n\n       \$( document ).on(\"click\", \"#SearchBtn\", function(){\n            callSearchFun();   \n        });\n        \$( document ).on(\"click\", \".clearSearch\", function(){\n            removeSearchSec();\n        });\n\n\n        \$( document ).on(\"click\", \".LoadMoreBtn\", function(){\n            \$('.LoadingMoreFa').removeClass('hideOnload');\n            var categoryid =\$(this).data('categoryid'); \n            var dataoffset =\$(this).data('dataoffset');\n            datalimit = Number(28)+Number(dataoffset);\n            dataoffset = Number(dataoffset)+Number(1); \n            jQuery.ajax({\n              type:\"POST\",\n              url:\"includes/ajax-control.php\",\n              dataType:\"text\",\n              data:{\n              action:'getMoviesDataFromCategoryId',\n              categoryID:categoryid,\n              dataoffset:dataoffset,\n              datalimit:datalimit,\n              hostURL: \"";
echo $XCStreamHostUrl . $bar;
echo "\"\n              },  \n                success:function(response2){ \n                  \$('.LoadingMoreFa').addClass('hideOnload');\n                  \$('.LoadMoreBtn').remove();\n                  var MoviesContainer = \$('#MoviesContainer');\n                  MoviesContainer.append(response2);\n                  setformatOfListsByClass('.thumb-b');\n                   \$('html, body').animate({\n                      scrollTop: Number(\$('.un-'+dataoffset).offset().top)-Number(140)\n                    }, 1500);\n                   \$(document).find(\".rippler\").rippler({\n    effectClass      :  'rippler-effect'\n    ,effectSize      :  0      // Default size (width & height)\n    ,addElement      :  'div'   // e.g. 'svg'(feature)\n    ,duration        :  400\n  });\n                }\n              });   \n          });   \n\n  });\n\n  function callSearchFun()\n  {\n      \$('.LoadMoreBtn').addClass('hideOnLoad');\n      var SearchData = \$(\"#SearchData\").val();   \n       \$('.visible-sec').removeClass('visible-sec');\n       \$('.SerchResult').addClass('hideOnLoad');\n       \$('#NoResultFound').addClass('hideOnLoad');\n       if(SearchData != \"\")\n       {\n          \$('.streamList').addClass('hideOnLoad');\n          var moive_namesearch = \$('.serch_key');\n          filter = SearchData.toUpperCase();\n          CustomIndex = 0;\n          moive_namesearch.each(function( index ) {\n            if (\$( this ).val().toUpperCase().indexOf(filter) > -1) {\n              \$(\".\"+\$(this).data('parentliclass')).removeClass('hideOnLoad');\n              \$(\".\"+\$(this).data('parentliclass')).addClass('visible-sec');\n              CustomIndex = 1;\n            }\n          });  \n          if(CustomIndex == 0)\n          {\n              \$('#NoResultFound').removeClass('hideOnLoad');\n          }\n          \$('#search').removeClass('open');\n          \$('#searchOf').text(filter);\n          \$('.SerchResult').removeClass('hideOnLoad');\n          setformatOfListsByClass('.visible-sec');\n\n       }\n       else\n       {\n          swal('Enter keyword for search.',{button: false});\n          setTimeout(function(){swal.close();},2000);\n       }\n  }\n\n  function removeSearchSec()\n  {\n      \$('.LoadMoreBtn').removeClass('hideOnLoad');\n     \$('.SerchResult').addClass('hideOnLoad'); \n     \$('#SearchData').val(''); \n     \$('#NoResultFound').addClass('hideOnLoad');\n     \$('.streamList').removeClass('hideOnLoad'); \n      setformatOfListsByClass('.thumb-b');\n  }\n\n  function confirmparent(\$categoryID = '', \$dataoffset = '0' ,\$datalimit = '28')\n  {\n      getData(\$categoryID);\n  }  \n\n\n  function getData(\$categoryID = '', \$dataoffset = '0' ,\$datalimit = '28')\n  {\n    \$(\"#NoResultFound\").addClass(\"hideOnLoad\");\n    removeSearchSec();\n   //\$('li .active').removeClass('active');\n    \$(this).addClass('active'); \n    var MoviesContainer = \$('#MoviesContainer');\n    \$('#fullLoader').removeClass('hideOnLoad');\n    MoviesContainer.html('');\n    MoviesContainer.addClass('hideOnLoad');\n   jQuery.ajax({\n            type:\"POST\",\n            url:\"includes/ajax-control.php\",\n            dataType:\"text\",\n            data:{\n            action:'getMoviesDataFromCategoryId',\n            categoryID:\$categoryID,\n            dataoffset:\$dataoffset,\n            datalimit:\$datalimit,\n            hostURL: \"";
echo $XCStreamHostUrl . $bar;
echo "\"\n            },  \n              success:function(response2){ \n                \$('#fullLoader').addClass('hideOnLoad');\n                if(response2 != \"0\")\n                {\n                    MoviesContainer.html('');\n                    MoviesContainer.html(response2);\n                    MoviesContainer.removeClass('hideOnLoad');\n                    setformatOfListsByClass('.thumb-b');\n                   \$(document).find(\".rippler\").rippler({\n    effectClass      :  'rippler-effect'\n    ,effectSize      :  0      // Default size (width & height)\n    ,addElement      :  'div'   // e.g. 'svg'(feature)\n    ,duration        :  400\n  });\n                }\n                else\n                {\n                    \$(\"#NoResultFound\").removeClass(\"hideOnLoad\");\n                }\n                /*\$getStreamsfromCategory = response2;\n                \$('.chanels').html(\$getStreamsfromCategory);\n                var StreamId = \$('.Playclick').first().find('.streamId').val();\n                var StreamType = \$('.Playclick').first().find('.streamId').data('streamtype');\n                \$('.Playclick').first().addClass('playingChanel');\n                getVideoLinkAjax(StreamId,StreamType);\n                getEPGdata(StreamId);*/\n              }\n            });\n  }\n\n  function setformatOfListsByClass(ClassName = \"\")\n  {\n      \$(\".free-wall\").each(function() {\n      var wall = new Freewall(this);\n      wall.reset({\n        selector: ClassName,\n        animate: true,\n        cellW: 185,\n        cellH: 278,\n        fixSize: 0,\n        gutterY: 0,\n        gutterX: -15,\n        onResize: function() {\n          wall.fitWidth();\n        }\n      })\n      wall.fitWidth();\n      /* \$(this).find('.iconImage').parent().parent().addClass('checkingcontrol');\n        console.log(\$(this).find('.iconImage').parent().parent().attr('data-width')+\"px\");*/\n        \$(this).find('.iconImage').css('width',\$(this).find('.iconImage').parent().parent().attr('data-width')+\"px\");\n        \$(this).find('.iconImage').css('height',\$(this).find('.iconImage').parent().parent().attr('data-height')+\"px\");\n    });\n    \$(window).trigger(\"resize\");\n  }\n\n  function showInfo(\$streamID = '')\n  {\n    var fullDataVal = \$(\"#fullData-\"+\$streamID).val();\n    /*\$('#fullLoader').removeClass('hideOnLoad');*/\n    \$('.sectionNo'+\$streamID+'').addClass('InfoLoading');\n    jQuery.ajax({\n            type:\"POST\",\n            url:\"includes/ajax-control.php\",\n            dataType:\"text\",\n            data:{\n            action:'getMovieInfo',\n            movieID:\$streamID,\n            fullDataVal:fullDataVal,\n            hostURL: \"";
echo $XCStreamHostUrl . $bar;
echo "\"\n            },  \n              success:function(response2){\n               \n                \$('.sectionNo'+\$streamID+'').removeClass('InfoLoading');\n                \$(document).find('.modal-dialog-custom').html(response2);\n                \$('#menuModal').modal('show');\n                \$(document).find(\".rippler\").rippler({\n    effectClass      :  'rippler-effect'\n    ,effectSize      :  0      // Default size (width & height)\n    ,addElement      :  'div'   // e.g. 'svg'(feature)\n    ,duration        :  400\n  });\n              }\n            })\n\n  }\n\n\n  function watchMovie(\$movie)\n  {\n    \$('#player-holder').removeClass('hideOnLoad');\n    \$('.poster-details').addClass('hideOnLoad');\n    \$('.backToInfo').removeClass('hideOnLoad');\n    ";
$resp = webtvpanel_checkPlayer();
if ($resp) {
    $livePlayer = $resp->{$username}->live_player;
    $moviesPlayer = $resp->{$username}->movie_player;
    $seriesPlayer = $resp->{$username}->series_player;
    if ($moviesPlayer == "JW Player") {
        echo "        \$movieVideoLink = \"";
        echo $XCStreamHostUrl . $bar;
        echo "movie/";
        echo $username . "/" . $password;
        echo "/\"+\$movie;\n        set_jwplayer(\$movieVideoLink);\n        ";
    } else {
        if ($moviesPlayer == "Flow player") {
            echo "        \$movieVideoLink = \"";
            echo $XCStreamHostUrl . $bar;
            echo "movie/";
            echo $username . "/" . $password;
            echo "/\"+\$movie;\n        set_flowplayer(\$movieVideoLink);\n        ";
        } else {
            if ($moviesPlayer == "AJ player") {
                echo "        \$movieVideoLink = \"";
                echo $XCStreamHostUrl . $bar;
                echo "movie/";
                echo $username . "/" . $password;
                echo "/\"+\$movie;\n        set_ajplayer(\$movieVideoLink);\n        ";
            } else {
                echo "        \$movieVideoLink = \"";
                echo $XCStreamHostUrl . $bar;
                echo "movie/";
                echo $username . "/" . $password;
                echo "/\"+\$movie;\n        set_jwplayer(\$movieVideoLink);\n        ";
            }
        }
    }
} else {
    echo "        \$movieVideoLink = \"";
    echo $XCStreamHostUrl . $bar;
    echo "movie/";
    echo $username . "/" . $password;
    echo "/\"+\$movie;\n        set_jwplayer(\$movieVideoLink);\n        ";
}
echo "  }\n  </script>\n  \n        ";
include "includes/footer.php";

?>